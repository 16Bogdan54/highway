!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){function n(){}n.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var o=this;function r(){o.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],r=[];if(o&&t)for(var s=0,i=o.length;s<i;s++)o[s].fn!==t&&o[s].fn._!==t&&r.push(o[s]);return r.length?n[e]=r:delete n[e],this}},e.exports=n},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o);class s{constructor(e){this.root=document.querySelector("[data-router-view]"),this.page=e.page,this.view=e.view,this.slug=e.slug,this.Transition=e.transition?new e.transition(this.root):null}setup(){this.onEnter&&this.onEnter(),this.onEnterCompleted&&this.onEnterCompleted()}add(){this.root.setAttribute("data-router-view",this.slug),this.root.innerHTML=this.view.innerHTML}remove(){this.root.innerHTML=""}update(){document.title=this.page.title}show(){return new Promise(async e=>{this.update(),this.onEnter&&this.onEnter(),this.Transition&&await this.Transition.show(),this.onEnterCompleted&&this.onEnterCompleted(),e()})}hide(){return new Promise(async e=>{this.onLeave&&this.onLeave(),this.Transition&&await this.Transition.hide(),this.remove(),this.onLeaveCompleted&&this.onLeaveCompleted(),e()})}}const i=new window.DOMParser;class a{static getOrigin(e){const t=e.match(/(https?:\/\/[\w\-.]+)/);return t?t[1]:null}static getPathname(e){const t=e.match(/https?:\/\/.*?(\/[\w_\-./]+)/);return t?t[1]:"/"}static getAnchor(e){const t=e.match(/(#.*)$/);return t?t[1]:null}static getParams(e){const t=e.match(/\?([\w_\-.=&]+)/);if(!t)return null;const n=t[1].split("&"),o={};for(let e=0;e<n.length;e++){const t=n[e].split("="),{0:r}=t,{1:s}=t;o[r]=s}return o}static getDOM(e){return"string"==typeof e?i.parseFromString(e,"text/html"):e}static getView(e){return e.querySelector("[data-router-view]")}static getSlug(e){return e.getAttribute("data-router-view")}static getRenderer(e,t){return void 0!==t&&t&&e in t?t[e]:s}static getTransition(e,t){return void 0!==t&&t?e in t?t[e]:"default"in t?t.default:null:null}}t.default={Core:class extends r.a{constructor({renderers:e,transitions:t}={}){super(),this.renderers=e,this.transitions=t,this.state=this.getState(window.location.href),this.props=this.getProps(document.cloneNode(!0)),this.link=null,this.cache=new Map,this.navigating=!1,this.From=new(a.getRenderer(this.props.slug,this.renderers))(this.props),this.From.setup(),this._click=this.click.bind(this),window.addEventListener("popstate",this.popState.bind(this)),this.bind()}getProps(e){const t=a.getDOM(e),n=a.getView(t),o=a.getSlug(n);return{page:t,view:n,slug:o,transition:a.getTransition(o,this.transitions)}}getState(e){return{url:e,anchor:a.getAnchor(e),origin:a.getOrigin(e),params:a.getParams(e),pathname:a.getPathname(e)}}bind(){this.links=document.querySelectorAll('a:not([target]):not([href*="javascript"])');for(const e of this.links)e.addEventListener("click",this._click)}unbind(){for(const e of this.links)e.removeEventListener("click",this._click)}click(e){e.preventDefault();const{href:t}=e.currentTarget,n=a.getAnchor(t),o=a.getParams(t),r=a.getPathname(t);this.navigating||r===this.state.pathname||o?(n||o)&&(window.location.href=t):(this.link=e.currentTarget,this.pushState())}popState(){const e=this.getState(window.location.href);e.pathname!==this.state.pathname&&this.beforeFetch(e)}pushState(){const e=this.getState(this.link.href);e.pathname&&window.history.pushState(e,"",e.url),this.beforeFetch(e)}async beforeFetch(e){if(this.navigating=!0,this.emit("NAVIGATE_OUT",{page:this.From.page,view:this.From.view},this.state),this.unbind(),await this.From.hide(),this.state=e,this.cache.has(this.state.pathname))this.props=this.cache.get(this.state.pathname);else{const e=await this.fetch();this.props=this.getProps(e),this.cache.set(this.state.pathname,this.props)}this.afterFetch()}async fetch(){const e=await fetch(this.state.url,{mode:"same-origin",method:"GET",headers:{"X-Requested-With":"Highway"},credentials:"same-origin"});if(e.status>=200&&e.status<300)return e.text();throw this.emit("NAVIGATE_ERROR",e),new Error(e.statusText)}async afterFetch(){window.scrollTo(0,0),this.To=new(a.getRenderer(this.props.slug,this.renderers))(this.props),this.To.add(),this.emit("NAVIGATE_IN",{page:this.To.page,view:this.To.root},this.state),await this.To.show(),this.bind(),this.navigating=!1,this.emit("NAVIGATE_END",{page:this.From.page,view:this.From.view},{page:this.To.page,view:this.To.root},this.state),this.From=this.To}},Helpers:a,Renderer:s,Transition:class{constructor(e){this.view=e}show(){return new Promise(e=>{this.in&&this.in(this.view,e)})}hide(){return new Promise(e=>{this.out&&this.out(this.view,e)})}}}}])},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o);var s=class extends r.a.Renderer{onEnter(){console.log("Load: Home"),console.log("----------"),console.log("Call: Home.onEnter()")}onLeave(){console.log("Call: Home.onLeave()")}onEnterCompleted(){console.log("Call: Home.onEnterCompleted()")}onLeaveCompleted(){console.log("Call: Home.onLeaveCompleted()"),console.log("----------")}};var i=class extends r.a.Renderer{onEnter(){console.log("Load: About"),console.log("----------"),console.log("Call: About.onEnter()")}onLeave(){console.log("Call: About.onLeave()")}onEnterCompleted(){console.log("Call: About.onEnterCompleted()")}onLeaveCompleted(){console.log("Call: About.onLeaveCompleted()"),console.log("----------")}};var a=class extends r.a.Renderer{onEnter(){console.log("Load: Features"),console.log("----------"),console.log("Call: Features.onEnter()")}onLeave(){console.log("Call: Features.onLeave()")}onEnterCompleted(){console.log("Call: Features.onEnterCompleted()")}onLeaveCompleted(){console.log("Call: Features.onLeaveCompleted()"),console.log("----------")}};var l=class extends r.a.Renderer{onEnter(){console.log("Load: Examples"),console.log("----------"),console.log("Call: Examples.onEnter()")}onLeave(){console.log("Call: Examples.onLeave()")}onEnterCompleted(){console.log("Call: Examples.onEnterCompleted()")}onLeaveCompleted(){console.log("Call: Examples.onLeaveCompleted()"),console.log("----------")}};var h=class extends r.a.Transition{in(e,t){console.log("Call: Fade.in()"),t()}out(e,t){console.log("Call: Fade.out()"),t()}};new r.a.Core({renderers:{home:s,about:i,features:a,examples:l},transitions:{default:h}})}]);