!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){var i;window,i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function s(){i.off(t,s),e.apply(n,arguments)}return s._=e,this.on(t,s,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,s=n.length;i<s;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],s=[];if(i&&e)for(var r=0,o=i.length;r<o;r++)i[r].fn!==e&&i[r].fn._!==e&&s.push(i[r]);return s.length?n[t]=s:delete n[t],this}},t.exports=n},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i);class r{constructor(t){this.view=t.view,this.page=t.page.cloneNode(!0),this.Transition=t.transition?new t.transition(t.view):null}init(){this.onEnter&&this.onEnter(),this.onEnterCompleted&&this.onEnterCompleted()}add(){this.wrapper=document.querySelector("[router-wrapper]"),this.wrapper.appendChild(this.view)}remove(){this.wrapper=this.view.parentNode,this.wrapper.removeChild(this.view)}update(){document.title=this.page.title,document.body.className=this.page.body.className,document.documentElement.className=this.page.documentElement.className}show(){return new Promise(async t=>{this.add(),this.update(),this.onEnter&&this.onEnter(),this.Transition&&await this.Transition.show(),this.onEnterCompleted&&this.onEnterCompleted(),t()})}hide(){return new Promise(async t=>{this.onLeave&&this.onLeave(),this.Transition&&await this.Transition.hide(),this.remove(),this.onLeaveCompleted&&this.onLeaveCompleted(),t()})}}const o=new window.DOMParser;class a{static getOrigin(t){const e=t.match(/(https?:\/\/[\w\-.]+)/);return e?e[1]:null}static getPathname(t){const e=t.match(/https?:\/\/.*?(\/[\w_\-./]+)/);return e?e[1]:null}static getAnchor(t){const e=t.match(/(#.*)$/);return e?e[1]:null}static getParams(t){const e=t.match(/\?([\w_\-.=&]+)/);if(!e)return null;const n=e[1].split("&"),i={};for(let t=0;t<n.length;t++){const e=n[t].split("="),{0:s}=e,{1:r}=e;i[s]=r}return i}static getDOM(t){return"string"==typeof t?o.parseFromString(t,"text/html"):t}static getView(t){return t.querySelector("[router-view]")}static getSlug(t){return t.getAttribute("router-view")}static getRenderer(t,e){return void 0!==e&&e&&t in e?e[t]:r}static getTransition(t,e){return void 0!==e&&e?t in e?e[t]:"default"in e?e.default:null:null}}e.default={Core:class extends s.a{constructor({renderers:t,transitions:e}={}){super(),this.renderers=t,this.transitions=e,this.state=this.getState(window.location.href),this.props=this.getProps(document),this.cache=new Map,this.navigating=!1,this.From=new(a.getRenderer(this.props.slug,this.renderers))(this.props),this.From.init(),window.addEventListener("popstate",this.popState.bind(this)),this.bind()}getProps(t){const e=a.getDOM(t),n=a.getView(e),i=a.getSlug(n);return{page:e,view:n,slug:i,transition:a.getTransition(i,this.transitions)}}getState(t){return{url:t,anchor:a.getAnchor(t),origin:a.getOrigin(t),params:a.getParams(t),pathname:a.getPathname(t)}}bind(){this.links=document.querySelectorAll("a:not([target])");for(const t of this.links)t.addEventListener("click",this.click.bind(this))}unbind(){for(const t of this.links)t.removeEventListener("click",this.click.bind(this))}click(t){t.preventDefault();const{href:e}=t.currentTarget,n=a.getAnchor(e),i=a.getPathname(e);this.navigating||i===this.state.pathname?n&&(window.location.href=e):this.pushState(t)}popState(){const t=this.getState(window.location.href);t.pathname!==this.state.pathname&&(this.state=t,this.beforeFetch())}pushState(t){this.beforeFetch(),this.state=this.getState(t.target.href),this.state.pathname&&window.history.pushState(this.state,"",this.state.url)}async beforeFetch(){if(this.navigating=!0,this.emit("NAVIGATE_OUT",this.From,this.state),this.unbind(),await this.From.hide(),this.cache.has(this.state.pathname))this.props=this.cache.get(this.state.pathname);else{const t=await this.fetch();this.props=this.getProps(t),this.cache.set(this.state.pathname,this.props)}this.afterFetch()}async fetch(){const t=await fetch(this.state.url,{mode:"same-origin",method:"GET",headers:{"X-Requested-With":"Highway"},credentials:"same-origin"});if(t.status>=200&&t.status<300)return t.text();throw this.emit("NAVIGATE_ERROR",t),new Error(t.statusText)}async afterFetch(){window.scrollTo(0,0),this.To=new(a.getRenderer(this.props.slug,this.renderers))(this.props),this.emit("NAVIGATE_IN",this.To,this.state),this.bind(),await this.To.show(),this.navigating=!1,this.emit("NAVIGATE_END",this.From,this.To,this.state),this.From=this.To}},Helpers:a,Renderer:r,Transition:class{constructor(t){this.view=t}show(){return new Promise(t=>{this.in&&this.in(this.view,t)})}hide(){return new Promise(t=>{this.out&&this.out(this.view,t)})}}}}])},t.exports=i()},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i);var r=class extends s.a.Renderer{onEnter(){}onLeave(){}onEnterCompleted(){}onLeaveCompleted(){}};var o=class extends s.a.Renderer{onEnter(){}onLeave(){}onEnterCompleted(){}onLeaveCompleted(){}};new s.a.Core({renderers:{home:r,page:o}})}]);